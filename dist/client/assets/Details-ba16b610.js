var u=Object.defineProperty;var m=(r,t,e)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var d=(r,t,e)=>(m(r,typeof t!="symbol"?t+"":t,e),e);import{r as o,j as n,a,L as p,b as f,u as v,c as g,A as C}from"./index-6531cbe5.js";import{u as E}from"./useQuery-21740514.js";async function k({queryKey:r}){const t=r[1],e=await fetch(`https://pets-v2.dev-apis.com/pets?id=${t}`);if(!e.ok)throw new Error(`details/${t} fetch failed`);return e.json()}class l extends o.Component{constructor(){super(...arguments);d(this,"state",{active:0});d(this,"handleClick",e=>{this.setState({active:+e.target.dataset.index})})}render(){const{active:e}=this.state,{images:i}=this.props;return n("div",{className:"carousel",children:[a("img",{src:i[e],alt:"animal hero image"}),a("div",{className:"carousel-smaller",children:i.map((c,s)=>a("img",{src:c,"data-index":s,className:s===e?"active":"",alt:"animal thumbnail",onClick:this.handleClick},c))})]})}}d(l,"defaultProps",{images:["https://pets-v2.dev-apis.com/pets/none.jpg"]});class x extends o.Component{constructor(){super(...arguments);d(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,i){console.error("Error caught in component",e,i)}render(){return this.state.hasError?n("h2",{children:["This page had an error.",a(p,{to:"/",children:"Go back to home."})]}):this.props.children}}function N({children:r}){const t=o.useRef(null);return t.current||(t.current=document.createElement("div")),o.useEffect(()=>{const e=document.getElementById("modal");return e.appendChild(t.current),()=>e.removeChild(t.current)},[]),f.createPortal(a("div",{children:r}),t.current)}function b(){const r=v(),[t,e]=o.useState(!1),{id:i}=g(),c=E(["details",i],k);if(c.isLoading)return a("div",{className:"loading-pane",children:a("h2",{className:"loader",children:"Loading"})});const s=c.data.pets[0],[y,h]=o.useContext(C);return n("div",{className:"details",children:[a(l,{images:s.images}),n("div",{children:[a("h1",{children:s.name}),n("h2",{children:[s.animal," - ",s.breed," - ",s.city," - ",s.state,n("button",{onClick:()=>e(!0),children:["Adopt ",s.name]}),a("p",{children:s.description}),t&&a(N,{children:n("div",{children:[n("h1",{children:["Would you like to adopt ",s.name,"?"]}),n("div",{className:"buttons",children:[a("button",{onClick:()=>{h(s),r("/")},children:"Yes"}),a("button",{onClick:()=>e(!1),children:"No"})]})]})})]})]})]})}function D(){return a(x,{children:a(b,{})})}export{D as default};
