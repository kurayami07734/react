import{j as i,L as g,a,r as u,A as v}from"./index-6531cbe5.js";import{u as f}from"./useQuery-21740514.js";async function $({queryKey:t}){const e=t[1];if(!e)return[];const n=await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${e}`);if(!n.ok)throw new Error(`details/${e} fetch failed`);return n.json()}function w(t){var n;const e=f(["breeds",t.toLowerCase()],$);return[((n=e==null?void 0:e.data)==null?void 0:n.breeds)??[],e.status]}async function j({queryKey:t}){const{animal:e,location:n,breed:r}=t[1],s=await fetch(`https://pets-v2.dev-apis.com/pets?animal=${e.toLowerCase()}&location=${n}&breed=${r}`);if(!s.ok)throw new Error(`Could not fetch ${e} of ${r} at ${n}`);return s.json()}function C(t){const{name:e,animal:n,breed:r,images:s,location:l,id:c}=t;let d="https://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(d=s[0]),i(g,{to:`/details/${c}`,className:"pet",children:[a("div",{className:"image-container",children:a("img",{src:d,alt:e})}),i("div",{className:"info",children:[a("h1",{children:e}),i("h2",{children:[n," - ",r," - ",l]})]})]})}const L=({pets:t})=>a("div",{className:"search",children:t.length?t.map(e=>a(C,{name:e.name,animal:e.animal,images:e.images,location:`${e.city} - ${e.state}`,id:e.id,breed:e.breed},e.id)):a("h1",{children:"No Pets Found.."})});function S(){var p;const t=["Dog","Bird","Cat","Reptile"],[e,n]=u.useState({location:"",animal:"",breed:""}),[r,s]=u.useState(""),[l]=w(r),c=f(["search",e],j),d=((p=c==null?void 0:c.data)==null?void 0:p.pets)??[],[m,N]=u.useContext(v);return i("div",{className:"search-params",children:[i("form",{onSubmit:o=>{o.preventDefault();const h=new FormData(o.target),b={animal:h.get("animal")??"",location:h.get("location")??"",breed:h.get("breed")??""};n(b)},children:[m&&i("div",{className:"pet image-container",children:[a("img",{src:m.images[0],alt:m.name}),a("h3",{children:m.name})]}),i("label",{htmlFor:"location",children:["Location",a("input",{id:"location",placeholder:"location",name:"location"})]}),i("label",{htmlFor:"animal",children:["Animal",i("select",{name:"animal",id:"animal",onChange:o=>s(o.target.value),children:[a("option",{}),t.map(o=>a("option",{children:o},o))]})]}),i("label",{htmlFor:"breed",children:["Breed",i("select",{name:"breed",disabled:l.length===0,id:"breed",children:[a("option",{}),l.map(o=>a("option",{children:o},o))]})]}),a("button",{children:"Submit"})]}),a(L,{pets:d})]})}export{S as default};
